<html>
	<head> <title> Chapter 8 </title> </head>
	<body>
		<h1 align = "center"> Chapter 8 </h1>
		<div style="position: absolute;right: 0px;width: 300px;direction: rtl;"> 
			<h2> Introduction </h2>
			<p> هانتكلم هنا عن حاجة مهمه جدا و لازم كلنا نكون عارفنها </p>
			<p> و هى ال file system فى لينكس </p>
			<p> هانشوف ازاى ال file system متقسم </p>
			<p> هانقدر اننا نقارن بين ال files المختلفة </p>
			<p> و ازاى ناخد back up </p>
			<h2> Section 1: FileSystem </h2>
			<p> فى لينكس كل حاجة عبارة عن file و ده معناه ان اى حاجة انت بتتعامل معاها سواء كانت ملفات او حاجات hardware زى كارت الصوت مثلا بتتعامل معاها بنفس الطريقة </p>
			<p> و ده بيوضح انك تقدر تفتح ال file ده و تشوف ايه اللى جواه و file و ممكن كمان تعدل فيه عن طريق ال text editor و ده هانعرفه قدام شوية ان شاء الله </p>
			<p> فى اكتر من نظام تشغيل بما فيهم لينكس ال file system بيتقسم على شكل شجرة بس مقلوبة </p>
			<p> يعنى ايه الكلام ده ؟ </p>
			<p> يعنى بذرة الشجرة هى اللى فوق و الافرع تحتيها </p>
			<p>  وبذرة الشجرة هنا بنسميها root directory ده طبعا حاجة مختلفة عن ال root user </p>
			<p> و ال root directory ده بيبدا ب (/) </p>
			<img src = "fileStructure.jpg" >
			<h5> FileSystem Hierarchy Standard </h5>
			<p> ال Filesystem Hierarchy Standard (FHS) بدا ظهوروه مع اوائل نظام unix </p>
			<p> ال FHS هو اللى بيساعد ال developers و ال system admins بالتوزيع الاساسى للمبفات فى النظام </p>
			<p> و كمان لينكس بيقدر يعمل support لانواع كتير من ال file system سواء اللى تم انشأها للينكس او كمان اللى شغالة على windows و mac </p>
			<p> زى ال FATو ال ext3, ext4, btrfs, xfs دول اللى فى لينكس او من بره زى ماقولنا قبل كده زى vfat, ntfs, hfs </p>
			<h5> Partitions in Linux </h5>
			<p> ى file system قايم فى ال hard disk بتاعه على فكرة ال partition و هى انى اقسم المساحة اللى فى ال hard </p>
			<p> طيب ليه بيعمله كده عشان يقدر يسهل فى التعامل مع ال files </p>
			<p> يعنى مثلا الملفات المهمه و البرامج اللى قايم عليها النظام بتكون محطوطة فى جزء لوحده اللى هو هنا ال root </p>
			<p>  باقى ال system موجود فى partition تانى اللى هو ال /home </p>
			<p>  و بكده انا اقدر استغل كل المساحة اللى فى ال hard عندى بطريقة فعالة </p>
			<h5> Mount Point </h5>
			<p> قبل ما نعرف اكتر عن ال file system و نستخدمه محتاجين نعرف عن حاجة مهمه اوى اسمها ال Mount Point </p>
			<p> ال mount point هو المسار للملفات كلها اللى فى الجهاز .. او تقدر تقول الطريق اللى الملفات بتمشى عليه عشان تقدر توص لملف معين </p>
			<p> المسار ده بربطه مع ال file system </p>
			<p> و كمان المسار ده ممكن يكون فاضى او فيه معلومات </p>
			<p> فى اغلب الاوقات ال mount point بتكون موجودة و جاهزة بس فيه اوقات تانية بتحتاج ان انت اللى تعملها بنفسك و توصلها بال file system </p>
			<p> فى اغلب الاوقات برضة بيكون ال directory فاضى بس لو كان فيه معلومات وقتها انت مش هاتقدر تعمل access للمعلومات ديه الا لما تشيل ال mount point على ال directory ده و توصله بواحد جديد </p>
			<p> طيب الكلام ده بيحصل ازاى </p>
			<p> فيه command اسمه mount بيستخدم فى انى اعمل mount point سواء كان اللى هاعمله mount ده local او على network </p>
			<p> مثال على ده </p>
			<p> $ mount /dev/sda5 /home </p> 
			<p> و ده معناه انى بقول ان ال file system هايباه مربوط ب /dev/sda5 طيب فى انهى جزء بالظبط فى ال /home  </p>
			<p> طبعا ده لو ماكانش النظام عمل من نفسه mount point </p>
			<p>  و لو كتبت mount بس من غير اى حاجة تانية هايظهرلى ال mount point اللى مرتبط بيها ال file system </p>
			<p>  والامر  df -Th (disk-free) </p>
			<p> هايظهرلى معلومات عن ال mount point مستخدم قد ايه و مكانه ايه </p>
			<img src = "D:\Mohamed\OSC\Linux Course\Chapter 8\mountcommand.jpg">
			<img src = "D:\Mohamed\OSC\Linux Course\Chapter 8\mountdata.jpg">
			<h5> The Network file system </h5>
			<p> استخدام ال NFS او ال network file system هو واحد من الطرق انى اشارك الملفات مع الشبكة الداخلية مع الاجهزة التانية اللى معايا فى نفس الشبكة </p>
			<p> فيه كتير من ال system admin بتستخدم الطرق ديه بتستخدم انها بتعمل لل home folder انها بتعمل mount لل direcory بتاع ال server عشان تقدر تشارك ال home من خلال الاجهزة </p>
			<p> و ده بيدى امكانية ان ممكن المستخدم يعمل login من اى جهاز فى الشبكة و يستخدم ال data بتاعتة </p>
			<br>
			<p> طيب خلينا نتكلم اكتر عن ازاى ال NFS بيشتغل فى ال server </p>
			<p> فى ال server عشان ابدا اشتغل مع NFS بنفذ الامر sudo service nfs start </p>
			<p> و موجود فى ال text file اللى موجود فى /etc/exports  على ال direcory و ال permission بتاعت ال files اللى هايبدا يتعملها share يعنى مكانها فين نظامها هل هى قراية بس و لا اقدر اكتب فيها </p>
			<p>  كون شكل اللى جوها زى المثال ده على </p>
			<p> /projects *.example.com(rw) </p>
			<p> و ده معناه ان ال direcory /projects شغال على نظام NFS مع read and write permission و كمان انا هاعمل share لل domain اللى اسمه example.com </p>
			<br>
			<p> طيب ده بالنسبة لل server طيب بالنسبة لل client الكلام عامل ازاى </p>
			<p> لو انا عايز اعمل mount لل file system اللى موجود فى جهاز تانى ال fstab file اللى موجود فى ال /etc/fstab هو المسئول اللى يعمل ده </p>
			<p> زى المثال ده </p>
			<p> servername:/projects /mnt/nfs/projects nfs defaults 0 0 </p>
			<p> و ممكن كمان تعمل mount لمرة واحده يعنى لما تعمل reboot للجهاز يروح ال mount عن طريق </p>
			<p> $ mount servername:/projects /mnt/nfs/projects </p>
			<p> ملحوظة لو انت مش معرف فى ملف ال fstab ال mount هايروح ال mount اول ما تعمل reboot لل system </p>
			<br>
			<h5> Proc FileSystem </h5>
			<p> ده اسمه ال pesudo file system و هو موجود فى ال /proc و ده مافيهوش ملفات دائمة انما مؤقتة </p>
			<p> يعنى ايه الكلام ده .. يعنى الملفات اللى فيه كل هدفها انها تبين ايه الل بيحصل فى النظام من ال memory على طول مش من ال hard عشان كده هى مؤقتة </p>
			<p> بيكون موجود فيها ال hardware اللى اتوصل بالجهاز و هو شغال ال system memory زى  </p>
			<p> /proc/cpuinfo </p>
			<p> /proc/interrupts </p>
			<p> /proc/meminfo </p>
			<p> /proc/mounts </p>
			<p> /proc/partitions </p>
			<p> /proc/version </p>
			<p> و ممكن كمان فى ال /proc يكون فيه subdirectories  زى </p> 
			<p> /proc/<Process-ID-#> و ده بيوضحلى معلومات عن ال process اللى شغالة دلوقتى فى ال system و بتتضمن معلومات مفيدة عنها  </p>
			<p> /proc/sys بيوضحلى معلومات مفيدة جدا عن ال system اللى شغال عليه </p> 
			<p> المعلومات اللى بيقدمها ال /proc مفيدة جدا و كمان مش بتاخد مكان فى ال hard disk </p> 
			<h2> Section 2: FileSystem Architecture </h2>
			<p> اول حاجة هانتعلم مع بعض فى ال section ده اهم ال direcories المهمه فى لينكس و الفرق بينهم و بين بعض </p> 
			<h5> /home </h5>
			<p> اول حاجة هانتكلم عنها هو ال /home </p>
			<p> دايما ال home بيتعمله mount لوحده يعنى مش بيتوصل بال root على طول او كمان بيتعمله mount عن طريق ال NFS و يكون shared </p>
			<p> زى مثلا المثال ده </p>
			<p> لو عندى مدرسة و عايز اعمل اكتر من folder للى فى المدرسة معايا </p> 
			<p> اقدر اعمل واحد للمدرسة نفسها /home/school/ </p>
			<p> و ممكن كمان اعمل واحد للشغالين فيها /home/staff/ </p>
			<p>  و كمان واحد للطلبة طبعا /home/students/ </p>
			<p> و اعمل mount عن طريق ال NFS للشبكة الداخلية للمدرسة </p> 
			<h5> /bin </h5>
			<p> و هو المستخدم عشان يشيل ال commands الاساسية فى ال system فى حالة ال single user mode زى ls و cp </p>
			<p> اما ال commands اللى مش اساسية بيتم حفظها فى /usr/bin </p>
			<p> اما ال /sbin بيستخدم لحفظ ال commands الاساسية لل system نفسة زى ifconfig او shutdown </p>
			<p> و فيه برضة /usr/sbin لل commands الاقل اساسية لل system </p>
			<h5> /dev </h5>
			<p> هو اختصار ل device nodes </p>
			<p> هو واحد من ال pesudo files اللى بتستخدم انى اوضح معلومات عن النظام </p> 
			<p> و هو فاضى لو ماكانش اتعمله mount </p>
			<p> فيه جواه files اتعملها create من خلال ال udev system و ال files ديه هى المسئولة انها تتحكم و تعرف ال devices فى النظام  زى </p>
			<p> /dev/sda1 اول partition فى ال hard disk </p>
			<p> /dev/lp1 لل second printer </p>
			<p> /dev/dvd1 لل first dvd  </p>
			<h5> /var </h5>
			<p> ال var بيشيل جواه المعلومات المتوقعه لما حجم الملفات بيتغير و النظام شغال عشان كده اسمه var جايه من variable يعنى </p>
			<p> و ده كمان بيتضمن ال services زى ال FTP و ال HTTP web services </p>	
			<h5> /boot </h5>
			<p> ال boot direcory جاى من اسمه هو المسئول انه يشيل المعلومات المسئولة ان النظام يعمل boot  </p>
			<p> اى kernel محتاج عشان يقدر يعمل boot انه يعرف شوية معلومات و ديه متخزنة فى ال /boot </p>
			<p> vmlinuz: ده ال kernel نفسه  </p>
			<p> initramfs: ال ram الاساسية اللى محتاجها الجهاز عشان يقوم و ساعات بيكون اسمها initrd </p>
			<p> config: ده اللى فيه تعريفات ال kernel و بيستخدم فى ال debugging  </p> 
			<p> System.map: وهو جدول بيوضح شويىة حاجات عن ال kernel و بيستخدم فى ال debugging </p>
			<p> و برضة ال GRUB files بتكون موجودة تحت ال /boot زى  /boot/grub/grub.conf او /boot/grub2/grub2.cfg </p>
			<h5> /media </h5>
			<p> هو ببساطة ال file اللى لما بعمل mount ل dvd او usb بيتحطوا فيه </p>
			<p> و اصلا انك تعمل mount ليهم ده بيتعمل automatic من النظام فى ال /media </p>
			<h2> Section 3 : comparing files </h2>
			<p> هانتعلم هنا ازاى نقارن بين ملفيين و معلومات عن انواع الملفات 
			<p> اول حاجة عشان اقدر اقارن بين ملفين او اتنين direcories اسهل و ابسط طريقة انى استخدم الامر diff </p>
			<p>  diff <filename1> <filename2>  </p>
			<P> و فيه كمان الامر diff3 عشان اقدر اقارن 3 ملفات مره واحده </p>
			<h2> Section 4 : Backup and compress data </h2>
			<p> هانشوف مع بعض هنا ازاى نقدر نحفظ المعلومات بتاعتنا و نعملها منها نسخ </p>
			<p> فيه طرق كتير عشان اقدر اعمل نسخ من المعلومات و الملفات و اسهل طريقة و ابسط طريقة هى الامر cp </p>
			<p> و فيه كمان الامر rsync و ده بيستخدم اكتر لانه اسرع و ده عشان مش بيعمل copy لملفات موجودة قبل كده و بيقارن بين حجم القديم و الجديد لو مالاقاش اختلاف مش بيعمل copy </p>
			<p> و اقدر كمان اعمل copy ل direcory مش على نفس الجهاز لملف معمول بصيغة NFS </p>
			<p> و بستخدمها بالشكل ده </p>
			<p> rsync sourcefile destinationfile </p>
			<p> بنقل معلومات من ال source لل destinationfile حتى لو كان ال destinationfile معايا او فى network معايا </p>
			<h5> compressing data </h5>
			<p> المعلومات و الملفات اقدر اضغطها عشان احافظ على المساحة الكبيرة و اجمع مجموعة ملفات مع بعض <p>
			<p> و عشان اعمل كده فيه اوامر تقدر تساعدنى زى </p>
			<p> gzip و ده الشائع استخدامه فى لينكس </p>
			<p> bzip2 بيضغط الملفات اصغر من gzip مابيضعطها </p>
			<p> xz  امر بيضغط فى اقل مساحة ممكنة فى لينكس كله </p> 
			<p> zip احيانا بيستخدم عشان اضغط ملفات و افك الضغط عنها معمولة من نظم تشغيل مختلفة </p>
			<p>  ده كمان بالاضافة ل tar اللى بيستخدم انى اضغط مجموعة من الملفات و بعد كده اقدر اضغط المضغوط منها فى مضغوط واحد :D </p>
			<p> خلونا دلوقتى نتكلم شوية عن gzip لانه ليه خصائص كتير منها </p>
			<p> gzip * و ده بيضغط كل الملفات اللى موجودة فى ال direcory اللى انا واقف عليه و كل واحد بيضغط بيتحول صيغتة ل .gz </p>
			<p> gzip -r projectX و ده بيضغط كل الملفات بس بيحطها فى ال direcory اللى اسمه projectX </p>
			<p> gunzip foo  وده معناه انه يفك ضغط الملف اللى اسمه foo و نفس الامر ده زيه زى gzip –d </p>
			<p>  و الامر bzip2 زيه زى gzip بس بطريقة مختلفة عشان كده بيضغط فى مساحة اقل و عشان كده برضة بيستخدم عشان اضعط الملفات اللى مساحتها كبيرة </p>
			<p> bzip2 * بيضعط كل الملفات و بيحفظها بصيغة .bz2 </p>
			<p> bunzip2 *.bz2 بيستخدم برضة انى افك ضغط كل الملفات اللى اللى بصيغة .bz2 و الامر ده مشابه للامر  bzip2 -d </p>
			<h5> Disk-to-Disk Copying </h5>
			<p> dd هو برنامج مفيد جدا عشان اعمل نسخة من المعلومات من disk ل disk تانى </p>
			<p> مثانى عايز انقل او 512 byte sector  من ال disk الاول للتانى هاستخدم الامر </p> 
			<p> dd if=/dev/sda of=sda.mbr bs=512 count=1 <p>
			<p> تخذير الامر ده هايمسح الاول من ال disk التانى و بعد كده يعمل copy للجديد </p>
			<p> و تحذير تانى عند استخدام الامر ده عشان ممكن يسمح كل اللى فى ال disk التانى عشان كده بيستخدم بحرص شديد </p> 
			<br>
			<br>
			<p> كده احنا فى ال chapter ده اتعلمنا حاجات كتير .. هو صحيح كبير بس مهم لينا كلنا يا ريت نستفيد منه جدا </p>
			
			
			
			
			
		</div>
	</body>
	
</html>
